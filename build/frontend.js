!function(){function e(e){if(e.querySelectorAll("div.mktoGutter, div.mktoOffset").forEach(e=>e.remove()),e.matches&&e.matches("div.mktoGutter, div.mktoOffset"))return void e.remove();const t=[];e.matches&&e.matches(".mktoHasWidth, .mktoFormCol, .mktoButton")&&t.push(e),e.querySelectorAll(".mktoHasWidth, .mktoFormCol, .mktoButton").forEach(e=>t.push(e)),t.forEach(e=>{e.removeAttribute("style"),e.classList.remove("mktoHasWidth"),e.classList.remove("mktoFormCol"),"BUTTON"===e.tagName&&(e.classList.remove("mktoButton"),e.classList.add("button"))})}function t(e){if(e.closest(".mktoCheckboxList")||e.closest(".mktoRadioList"))return;const t=e.closest(".mktoFieldWrap");if(t&&!t.classList.contains("form-field-wrapper")&&(t.classList.add("form-field-wrapper"),t.querySelector(".mktoLabel")))if("SELECT"===e.tagName&&e.multiple)!function(e,t){e.style.display="none",e.setAttribute("aria-hidden","true"),e.tabIndex=-1;const s=document.createElement("div");s.className="multiselect-container",t.appendChild(s);const o=document.createElement("div");o.className="multiselect-selected",s.appendChild(o);const n=document.createElement("div");n.className="multiselect-dropdown",s.appendChild(n);const a="ms-dd-"+Math.random().toString(36).slice(2);n.id=a,n.setAttribute("role","listbox"),n.setAttribute("aria-multiselectable","true"),o.setAttribute("tabindex","0"),o.setAttribute("role","combobox"),o.setAttribute("aria-haspopup","listbox"),o.setAttribute("aria-expanded","false"),o.setAttribute("aria-controls",a);const i=t.querySelector(".mktoLabel");i?(i.id||(i.id="ms-lbl-"+Math.random().toString(36).slice(2)),o.setAttribute("aria-labelledby",i.id)):e.name&&o.setAttribute("aria-label",e.name);let r=-1;function l(){n.classList.add("is-open"),t.classList.add("form-field--is-active"),o.setAttribute("aria-expanded","true")}function c(){n.classList.remove("is-open"),t.classList.remove("form-field--is-active"),o.setAttribute("aria-expanded","false"),r=-1}function d(e){const t=Array.from(n.querySelectorAll(".multiselect-option"));0!==t.length&&(e<0&&(e=0),e>=t.length&&(e=t.length-1),r=e,t[e].focus())}const u=Array.from(e.options);function m(){o.innerHTML="",u.forEach(e=>{if(e.selected){const t=document.createElement("div");t.className="multiselect-chip",t.textContent=e.textContent;const s=document.createElement("button");s.type="button",s.className="multiselect-chip-remove",s.setAttribute("aria-label","Remove "+e.textContent),s.textContent="Ã—",s.addEventListener("click",t=>{t.stopPropagation(),e.selected=!1,m(),f()}),t.appendChild(s),o.appendChild(t)}}),t.classList.toggle("form-field--is-filled",e.selectedOptions.length>0)}function f(){n.querySelectorAll(".multiselect-option").forEach(e=>{const t=u.find(t=>t.value===e.dataset.value).selected;e.classList.toggle("is-selected",t),e.setAttribute("aria-selected",t?"true":"false")})}u.forEach(e=>{const t=document.createElement("div");t.className="multiselect-option",t.textContent=e.textContent,t.dataset.value=e.value,t.setAttribute("role","option"),t.setAttribute("tabindex","-1"),t.setAttribute("aria-selected",e.selected?"true":"false"),t.addEventListener("click",()=>{e.selected=!e.selected,m(),f(),t.focus()}),n.appendChild(t)}),o.addEventListener("click",()=>{n.classList.contains("is-open")?c():(l(),d(0))}),o.addEventListener("focus",()=>{t.classList.add("form-field--is-active")}),o.addEventListener("blur",()=>{setTimeout(()=>{s.contains(document.activeElement)||c()},0)}),o.addEventListener("keydown",e=>{"Enter"===e.key||" "===e.key?(e.preventDefault(),n.classList.contains("is-open")?c():(l(),d(0))):"ArrowDown"===e.key?(e.preventDefault(),n.classList.contains("is-open")||l(),d(0)):"ArrowUp"===e.key&&(e.preventDefault(),n.classList.contains("is-open")||l(),d(n.querySelectorAll(".multiselect-option").length-1))}),n.addEventListener("keydown",e=>{const t=Array.from(n.querySelectorAll(".multiselect-option"));if("ArrowDown"===e.key)e.preventDefault(),d(r+1);else if("ArrowUp"===e.key)e.preventDefault(),d(r-1);else if("Home"===e.key)e.preventDefault(),d(0);else if("End"===e.key)e.preventDefault(),d(t.length-1);else if("Escape"===e.key)e.preventDefault(),c(),o.focus();else if("Enter"===e.key||" "===e.key){if(e.preventDefault(),r>=0){const e=t[r],s=u.find(t=>t.value===e.dataset.value);s.selected=!s.selected,m(),f()}}else"Tab"===e.key&&c()}),document.addEventListener("click",e=>{s.contains(e.target)||c()}),m(),f()}(e,t);else{const s=()=>{const s="SELECT"===e.tagName?e.value&&""!==e.value:e.value&&""!==e.value.trim();t.classList.toggle("form-field--is-filled",s)};e.addEventListener("focus",()=>t.classList.add("form-field--is-active")),e.addEventListener("blur",()=>{t.classList.remove("form-field--is-active"),s()}),s()}}"undefined"!=typeof MktoForms2?MktoForms2.whenReady(function(s){const o=s.getFormElem()[0];if(function(s){const o=s.getFormElem()[0];e(o);const n='input[type="text"], input[type="email"], input[type="tel"], input[type="url"], input[type="password"], input[type="date"], input[type="number"], textarea, select';o.querySelectorAll(n).forEach(t),new MutationObserver(s=>{s.forEach(s=>{s.addedNodes&&s.addedNodes.forEach(s=>{1===s.nodeType&&(e(s),s.matches(n)&&t(s),s.querySelectorAll(n).forEach(t))})})}).observe(o,{childList:!0,subtree:!0})}(s),2587!==s.getId())return;const n=o.closest('[id^="mkto-form-"]');if(!n)return void console.error("Marketo block wrapper not found.");const a=n.id,i=window.MarketoBlockSettings?window.MarketoBlockSettings[a]:null,r=n.querySelector(".marketo-form-success");if(!r)return void console.error("Success element not found.");let l=!1;s.onSubmit(function(){if(s.submittable(!1),l)return!1;l=!0;const e=s.vals(),t=e.Email,n=e.flexCompanyName||e.Company||"",a=e.FirstName||"",c=e.LastName||"";if(!t)return l=!1,r.style.display="block",r.textContent="We could not read your email address. Please try again.",!1;if(!n)return l=!1,r.style.display="block",r.textContent="Company name is required. Please complete the form and try again.",!1;o.style.display="none",r.style.display="block",r.innerHTML='<span class="marketo-spinner"></span>Processing...';const d=new URLSearchParams;return d.append("action","flex_marketo_check"),d.append("email",t),d.append("company",n),d.append("first_name",a),d.append("last_name",c),fetch(MarketoFlexAjax.ajax_url,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},body:d.toString()}).then(function(e){return e.json()}).then(function(e){if(l=!1,e&&e.success&&e.data&&e.data.error&&String(e.data.error).toLowerCase().includes("already has flex trial")){const e="https://manage.attackiqready.com/login?next=";return void(r.innerHTML='You already have an account. <a href="'+e+'">Log in here</a>.')}if(e&&e.success)return i&&i.redirectUrl?void(window.location.href=i.redirectUrl):i&&i.successMessage?void(r.innerHTML=i.successMessage):void(r.innerHTML="Thank you.");r.textContent=e&&e.message?e.message:"Your submission could not be processed. Please try again."}).catch(function(){l=!1,r.textContent="Could not contact endpoint. Please try again."}),!1})}):console.error("Marketo Forms 2 API not found.")}();